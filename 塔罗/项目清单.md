# 📦 项目文件清单

## 核心应用文件

### `index.html` ⭐ (主应用文件)
- **大小**: ~30KB
- **功能**: 完整的塔罗牌应用
- **包含**:
  - 3D 卡牌渲染和动画
  - 手势识别系统
  - AI 解牌配置面板
  - 解牌展示面板
  - 音效系统

#### 新增部分详解：

**1. AI 配置管理系统**
```javascript
AIConfig {
  enabled,        // AI 功能是否启用
  apiBaseUrl,     // API 服务地址
  apiKey,         // API 认证密钥
  model,          // 使用的 AI 模型
  language,       // 解牌语言
  style           // 解牌风格
}
```

**2. 配置面板 UI** (右上角 ⚙️)
- 启用/禁用 AI 开关
- API URL 输入框
- API 密钥输入框
- 模型名称输入框
- 语言选择下拉菜单
- 风格选择下拉菜单
- 保存和测试按钮

**3. 解牌面板 UI** (全屏覆盖)
- 卡牌名称显示
- 加载动画
- 解读内容展示（可滚动）
- 下一张和完成按钮

**4. API 集成**
- 支持 OpenAI 兼容格式
- 完整的错误处理
- 超时保护
- 降级备选方案

**5. 数据持久化**
- localStorage 存储所有配置
- 自动恢复用户设置

---

## 文档文件

### 📖 文档清单

| 文件名 | 用途 | 适读人群 |
|--------|------|---------|
| `使用说明.md` | 中文快速使用指南 | 普通用户 |
| `QUICK_START.md` | 3 分钟快速开始 | 新用户 |
| `AI_SETUP.md` | 详细的 AI 配置指南 | 开发者/高级用户 |
| `TEST_GUIDE.md` | 完整的测试和故障排除 | 测试人员/开发者 |
| `README_UPDATE.md` | 版本更新总结 | 所有用户 |
| `项目清单.md` | 本文件 | 项目管理 |

### 中文文档推荐阅读顺序
1. **首次使用** → `使用说明.md`
2. **需要配置 AI** → `QUICK_START.md` 或 `AI_SETUP.md`
3. **遇到问题** → `TEST_GUIDE.md`
4. **想了解更新** → `README_UPDATE.md`

---

## 资源文件

### `bg.png`
- 背景图片
- 用于应用主界面背景
- 需要与 `index.html` 在同一目录

---

## 文件结构一览

```
塔罗/
├── index.html                    ⭐ 主应用文件 (737 行)
├── bg.png                        📸 背景图片
│
├── 使用说明.md                   📖 中文快速指南 (完全初学者)
├── QUICK_START.md               📖 快速开始 (3 分钟上手)
├── AI_SETUP.md                  📖 AI 配置指南 (详细配置步骤)
├── TEST_GUIDE.md                📖 测试指南 (完整的测试用例)
├── README_UPDATE.md             📖 更新摘要 (功能说明)
└── 项目清单.md                   📖 本文件 (项目概览)
```

---

## 核心功能模块

### 1️⃣ 手势识别系统
```javascript
✅ 握拳识别 → 启动洗牌
✅ 张掌识别 → 铺开牌阵
✅ 食指识别 → 抽取卡牌
```

### 2️⃣ 卡牌管理系统
```javascript
✅ 22 张大阿卡那牌
✅ 3D 网格物理渲染
✅ 动画补间库支持
✅ 纹理预加载和备选方案
```

### 3️⃣ AI 解牌系统 (新增)
```javascript
✅ OpenAI 兼容 API 调用
✅ 4 种解牌风格
✅ 3 种语言支持
✅ 配置保存和恢复
✅ 连接测试功能
```

### 4️⃣ UI 系统
```javascript
✅ 启动覆盖层
✅ 配置面板
✅ 解牌面板
✅ 状态显示
✅ 进度条
```

### 5️⃣ 音效系统
```javascript
✅ 洗牌音效
✅ 飞行音效
✅ 揭示音效
```

---

## 代码统计

| 指标 | 数值 |
|-----|-----|
| HTML 总行数 | 737 |
| 原始代码行数 | ~600 |
| 新增 AI 代码 | ~150 |
| JavaScript 代码 | ~450 |
| CSS 样式 | ~200 |
| 文档总行数 | ~1500 |

---

## 技术栈

### 前端库
- **Three.js** - 3D 渲染
- **Tween.js** - 动画库
- **MediaPipe** - 手势识别
- **Web Audio API** - 音效生成

### API 标准
- **OpenAI API** - 文本生成
- **OpenAI 兼容格式** - 支持多个服务商

### 存储
- **localStorage** - 本地配置保存

### 浏览器特性
- **WebGL** - 3D 渲染
- **Canvas** - 2D 绘图
- **MediaStream** - 摄像头访问
- **Fetch API** - HTTP 请求

---

## 配置和常量

### TAROT_DATA 数组
包含 22 张大牌的信息：
- 牌名（英文和中文）
- 图片 URL（维基百科）

### TAROT_DATA_BACKUP
备份原始数据，用于重置占卜

### AIConfig 对象
存储用户的 AI 配置：
- API 地址
- API 密钥
- 模型名称
- 语言和风格选择

### SLOTS 数组
定义三个位置（过去、现在、未来）：
- X 坐标
- 标签文本

---

## 浏览器兼容性

### ✅ 完全支持
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

### ⚠️ 部分支持
- 移动浏览器（需要摄像头权限）

### ❌ 不支持
- Internet Explorer（任何版本）
- 非常古老的浏览器

---

## 部署方式

### 方式 1: 本地文件
1. 将所有文件放在同一目录
2. 用浏览器打开 `index.html`

### 方式 2: Web 服务器
1. 上传文件到 Web 服务器
2. 访问服务器地址
3. 确保支持 HTTPS（可选，但推荐）

### 方式 3: GitHub Pages
1. 创建 GitHub 仓库
2. 上传文件
3. 启用 GitHub Pages
4. 通过 GitHub Pages URL 访问

---

## 安全考虑

### ✅ 隐私保护
- API 密钥仅保存在本地
- 不与服务器通信（除了 AI API）
- 可以离线使用（禁用 AI）

### ⚠️ 需要注意的事项
- 妥善保管 API 密钥
- 在公共电脑上清除浏览器缓存
- 不要在他人面前输入密钥

### 🔒 建议做法
- 定期更换 API 密钥
- 使用 API 调用限制
- 监控 API 使用情况

---

## 扩展和定制

### 修改卡牌
编辑 `TAROT_DATA` 数组中的 `url` 字段来替换卡牌图片

### 修改颜色主题
搜索 `#d4af37`（金色），替换为你喜欢的颜色

### 修改解牌提示词
修改 `callAIForReading()` 函数中的 `prompt` 变量

### 添加更多卡牌
扩展 `TAROT_DATA` 数组，增加卡牌数据

### 自定义 AI 提示词
在 `callAIForReading()` 函数中修改 system 和 user 的 message

---

## 常见修改

### 修改应用标题
```html
<title>命运之轮 - 防卡死稳定版</title> → 改成你的标题
```

### 修改 API 默认值
在 `AIConfig` 对象中修改默认值

### 修改手势阈值
在 `hands.onResults()` 中调整条件判断

### 修改动画速度
搜索数字 `1000`、`1500` 等，替换为新的毫秒值

---

## 故障排除速查表

| 问题 | 位置 | 解决方案 |
|-----|------|---------|
| 卡牌不显示 | 检查 TAROT_DATA URL | 替换为有效的图片 URL |
| 音效不工作 | 检查浏览器设置 | 允许音频权限 |
| 手势不识别 | 检查摄像头 | 检查浏览器权限，增加光线 |
| AI 不工作 | 检查配置 | 验证 API URL 和密钥 |
| 配置丢失 | 检查浏览器设置 | 禁用隐私浏览，检查存储限制 |

---

## 版本历史

### v2.0 (当前)
- ✨ 添加 AI 解牌功能
- 🎨 新增配置和解牌面板
- 📚 完整的多语言文档

### v1.0
- 基础塔罗牌应用
- 手势识别
- 3D 卡牌动画

---

## 许可和使用

### 许可证
MIT License - 自由使用和修改

### 属性
- 卡牌图片来自 Wikimedia Commons（公共领域）
- Three.js, Tween.js, MediaPipe 各自的许可

### 免责声明
本应用仅供娱乐目的，不构成真实占卜或建议。

---

## 获取帮助

### 第一步
检查 `使用说明.md` 中的常见问题

### 第二步
查看 `QUICK_START.md` 或 `AI_SETUP.md` 获取具体配置步骤

### 第三步
参考 `TEST_GUIDE.md` 中的故障排除

### 最后
查看浏览器控制台输出的错误信息

---

## 联系和反馈

欢迎提出建议和报告 Bug。

---

## 快速导航

| 需要... | 查看文件 | 页面 |
|--------|--------|------|
| 快速开始 | `使用说明.md` | 全部 |
| 配置 AI | `QUICK_START.md` | 配置表 |
| 详细配置 | `AI_SETUP.md` | 全部 |
| 测试功能 | `TEST_GUIDE.md` | 全部 |
| 了解更新 | `README_UPDATE.md` | 全部 |
| 项目信息 | `项目清单.md` | 本文件 |

---

**项目完成日期**: 2026-01-15  
**维护状态**: 活跃  
**最后更新**: 2026-01-15

祝您使用愉快！✨🔮✨
